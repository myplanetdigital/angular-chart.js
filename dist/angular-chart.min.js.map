{"version":3,"sources":["angular-chart.min.js"],"names":["factory","define","amd","exports","module","require","angular","Chart","ChartJsProvider","options","ChartJs","getOptions","type","typeOptions","extend","this","setOptions","customOptions","$get","ChartJsFactory","canUpdateChart","newVal","oldVal","length","Array","isArray","reduce","sum","carry","val","createChart","scope","elem","data","getColour","getRandomColour","colours","getColours","cvs","ctx","getContext","getDataSets","labels","series","getData","chart","$emit","forEach","action","getEventHandler","legend","setLegend","evt","atEvent","getPointsAtEvent","getBarsAtEvent","getSegmentsAtEvent","activePoints","call","$apply","copy","defaults","global","push","map","convertColour","colour","hexToRgb","substr","getRandomInt","fillColor","rgba","strokeColor","pointColor","pointStrokeColor","pointHighlightFill","pointHighlightStroke","min","max","Math","floor","random","alpha","usingExcanvas","join","concat","hex","bigint","parseInt","r","g","b","datasets","item","i","label","value","color","highlight","$parent","parent","$oldLegend","find","generateLegend","replaceWith","append","updateChart","values","dataset","points","bars","dataItem","j","segments","segment","update","isEmpty","Object","keys","restrict","chartType","click","hover","link","resetChart","equals","destroy","container","document","createElement","className","appendChild","window","G_vmlCanvasManager","initElement","$watch","$on","responsive","multiTooltipTemplate","animation","provider","directive"],"mappings":"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","file":"angular-chart.min.js","sourcesContent":["(function (factory) {\r\n  'use strict';\r\n  if (typeof define === 'function' && define.amd) {\r\n    // AMD. Register as an anonymous module.\r\n    define(['angular', 'chartjs'], factory);\r\n  } else if (typeof exports === 'object') {\r\n    // Node/CommonJS\r\n    module.exports = factory(require('angular'), require('chart.js'));\r\n  } else {\r\n    // Browser globals\r\n    factory(angular, Chart);\r\n  }\r\n}(function (angular, Chart) {\r\n  'use strict';\r\n\r\n  Chart.defaults.global.responsive = true;\r\n  Chart.defaults.global.multiTooltipTemplate = '<%if (datasetLabel){%><%=datasetLabel%>: <%}%><%= value %>';\r\n\r\n  Chart.defaults.global.colours = [\r\n    '#97BBCD', // blue\r\n    '#DCDCDC', // light grey\r\n    '#F7464A', // red\r\n    '#46BFBD', // green\r\n    '#FDB45C', // yellow\r\n    '#949FB1', // grey\r\n    '#4D5360'  // dark grey\r\n  ];\r\n\r\n  var usingExcanvas = typeof window.G_vmlCanvasManager === 'object' &&\r\n    window.G_vmlCanvasManager !== null &&\r\n    typeof window.G_vmlCanvasManager.initElement === 'function';\r\n\r\n  if (usingExcanvas) Chart.defaults.global.animation = false;\r\n\r\n  angular.module('chart.js', [])\r\n    .provider('ChartJs', ChartJsProvider)\r\n    .factory('ChartJsFactory', ['ChartJs', ChartJsFactory])\r\n    .directive('chartBase', ['ChartJsFactory', function (ChartJsFactory) { return new ChartJsFactory(); }])\r\n    .directive('chartLine', ['ChartJsFactory', function (ChartJsFactory) { return new ChartJsFactory('Line'); }])\r\n    .directive('chartBar', ['ChartJsFactory', function (ChartJsFactory) { return new ChartJsFactory('Bar'); }])\r\n    .directive('chartRadar', ['ChartJsFactory', function (ChartJsFactory) { return new ChartJsFactory('Radar'); }])\r\n    .directive('chartDoughnut', ['ChartJsFactory', function (ChartJsFactory) { return new ChartJsFactory('Doughnut'); }])\r\n    .directive('chartPie', ['ChartJsFactory', function (ChartJsFactory) { return new ChartJsFactory('Pie'); }])\r\n    .directive('chartPolarArea', ['ChartJsFactory', function (ChartJsFactory) { return new ChartJsFactory('PolarArea'); }]);\r\n\r\n  /**\r\n   * Wrapper for chart.js\r\n   * Allows configuring chart js using the provider\r\n   *\r\n   * angular.module('myModule', ['chart.js']).config(function(ChartJsProvider) {\r\n   *   ChartJsProvider.setOptions({ responsive: true });\r\n   *   ChartJsProvider.setOptions('Line', { responsive: false });\r\n   * })))\r\n   */\r\n  function ChartJsProvider () {\r\n    var options = {};\r\n    var ChartJs = {\r\n      Chart: Chart,\r\n      getOptions: function (type) {\r\n        var typeOptions = type && options[type] || {};\r\n        return angular.extend({}, options, typeOptions);\r\n      }\r\n    };\r\n\r\n    /**\r\n     * Allow to set global options during configuration\r\n     */\r\n    this.setOptions = function (type, customOptions) {\r\n      // If no type was specified set option for the global object\r\n      if (! customOptions) {\r\n        customOptions = type;\r\n        options = angular.extend(options, customOptions);\r\n        return;\r\n      }\r\n      // Set options for the specific chart\r\n      options[type] = angular.extend(options[type] || {}, customOptions);\r\n    };\r\n\r\n    this.$get = function () {\r\n      return ChartJs;\r\n    };\r\n  }\r\n\r\n  function ChartJsFactory (ChartJs) {\r\n    return function chart (type) {\r\n      return {\r\n        restrict: 'CA',\r\n        scope: {\r\n          data: '=',\r\n          labels: '=',\r\n          options: '=',\r\n          series: '=',\r\n          colours: '=?',\r\n          getColour: '=?',\r\n          chartType: '=',\r\n          legend: '@',\r\n          click: '=',\r\n          hover: '='\r\n        },\r\n        link: function (scope, elem/*, attrs */) {\r\n          var chart, container = document.createElement('div');\r\n          container.className = 'chart-container';\r\n          elem.replaceWith(container);\r\n          container.appendChild(elem[0]);\r\n\r\n          if (usingExcanvas) window.G_vmlCanvasManager.initElement(elem[0]);\r\n\r\n          // Order of setting \"watch\" matter\r\n\r\n          scope.$watch('data', function (newVal, oldVal) {\r\n            if (! newVal || ! newVal.length || (Array.isArray(newVal[0]) && ! newVal[0].length)) return;\r\n            var chartType = type || scope.chartType;\r\n            if (! chartType) return;\r\n\r\n            if (chart) {\r\n              if (canUpdateChart(newVal, oldVal)) return updateChart(chart, newVal, scope);\r\n              chart.destroy();\r\n            }\r\n\r\n            chart = createChart(chartType, scope, elem);\r\n          }, true);\r\n\r\n          scope.$watch('series', resetChart, true);\r\n          scope.$watch('labels', resetChart, true);\r\n          scope.$watch('options', resetChart, true);\r\n          scope.$watch('colours', resetChart, true);\r\n\r\n          scope.$watch('chartType', function (newVal, oldVal) {\r\n            if (isEmpty(newVal)) return;\r\n            if (angular.equals(newVal, oldVal)) return;\r\n            if (chart) chart.destroy();\r\n            chart = createChart(newVal, scope, elem);\r\n          });\r\n\r\n          scope.$on('$destroy', function () {\r\n            if (chart) chart.destroy();\r\n          });\r\n\r\n          function resetChart (newVal, oldVal) {\r\n            if (isEmpty(newVal)) return;\r\n            if (angular.equals(newVal, oldVal)) return;\r\n            var chartType = type || scope.chartType;\r\n            if (! chartType) return;\r\n\r\n            // chart.update() doesn't work for series and labels\r\n            // so we have to re-create the chart entirely\r\n            if (chart) chart.destroy();\r\n\r\n            chart = createChart(chartType, scope, elem);\r\n          }\r\n        }\r\n      };\r\n    };\r\n\r\n    function canUpdateChart (newVal, oldVal) {\r\n      if (newVal && oldVal && newVal.length && oldVal.length) {\r\n        return Array.isArray(newVal[0]) ?\r\n        newVal.length === oldVal.length && newVal[0].length === oldVal[0].length :\r\n          oldVal.reduce(sum, 0) > 0 ? newVal.length === oldVal.length : false;\r\n      }\r\n      return false;\r\n    }\r\n\r\n    function sum (carry, val) {\r\n      return carry + val;\r\n    }\r\n\r\n    function createChart (type, scope, elem) {\r\n      if (! scope.data || ! scope.data.length) return;\r\n      scope.getColour = typeof scope.getColour === 'function' ? scope.getColour : getRandomColour;\r\n      scope.colours = getColours(type, scope);\r\n      var cvs = elem[0], ctx = cvs.getContext('2d');\r\n      var data = Array.isArray(scope.data[0]) ?\r\n        getDataSets(scope.labels, scope.data, scope.series || [], scope.colours) :\r\n        getData(scope.labels, scope.data, scope.colours);\r\n      var options = angular.extend({}, ChartJs.getOptions(type), scope.options);\r\n      var chart = new ChartJs.Chart(ctx)[type](data, options);\r\n      scope.$emit('create', chart);\r\n\r\n      ['hover', 'click'].forEach(function (action) {\r\n        if (scope[action]) cvs[action === 'click' ? 'onclick' : 'onmousemove'] = getEventHandler(scope, chart, action);\r\n      });\r\n      if (scope.legend && scope.legend !== 'false') setLegend(elem, chart);\r\n      return chart;\r\n    }\r\n\r\n    function getEventHandler (scope, chart, action) {\r\n      return function (evt) {\r\n        var atEvent = chart.getPointsAtEvent || chart.getBarsAtEvent || chart.getSegmentsAtEvent;\r\n        if (atEvent) {\r\n          var activePoints = atEvent.call(chart, evt);\r\n          scope[action](activePoints, evt);\r\n          scope.$apply();\r\n        }\r\n      };\r\n    }\r\n\r\n    function getColours (type, scope) {\r\n      var colours = angular.copy(scope.colours ||\r\n        ChartJs.getOptions(type).colours ||\r\n        Chart.defaults.global.colours\r\n      );\r\n      while (colours.length < scope.data.length) {\r\n        colours.push(scope.getColour());\r\n      }\r\n      return colours.map(convertColour);\r\n    }\r\n\r\n    function convertColour (colour) {\r\n      if (typeof colour === 'object' && colour !== null) return colour;\r\n      if (typeof colour === 'string' && colour[0] === '#') return getColour(hexToRgb(colour.substr(1)));\r\n      return getRandomColour();\r\n    }\r\n\r\n    function getRandomColour () {\r\n      var colour = [getRandomInt(0, 255), getRandomInt(0, 255), getRandomInt(0, 255)];\r\n      return getColour(colour);\r\n    }\r\n\r\n    function getColour (colour) {\r\n      return {\r\n        fillColor: rgba(colour, 0.2),\r\n        strokeColor: rgba(colour, 1),\r\n        pointColor: rgba(colour, 1),\r\n        pointStrokeColor: '#fff',\r\n        pointHighlightFill: '#fff',\r\n        pointHighlightStroke: rgba(colour, 0.8)\r\n      };\r\n    }\r\n\r\n    function getRandomInt (min, max) {\r\n      return Math.floor(Math.random() * (max - min + 1)) + min;\r\n    }\r\n\r\n    function rgba (colour, alpha) {\r\n      if (usingExcanvas) {\r\n        // rgba not supported by IE8\r\n        return 'rgb(' + colour.join(',') + ')';\r\n      } else {\r\n        return 'rgba(' + colour.concat(alpha).join(',') + ')';\r\n      }\r\n    }\r\n\r\n    // Credit: http://stackoverflow.com/a/11508164/1190235\r\n    function hexToRgb (hex) {\r\n      var bigint = parseInt(hex, 16),\r\n        r = (bigint >> 16) & 255,\r\n        g = (bigint >> 8) & 255,\r\n        b = bigint & 255;\r\n\r\n      return [r, g, b];\r\n    }\r\n\r\n    function getDataSets (labels, data, series, colours) {\r\n      return {\r\n        labels: labels,\r\n        datasets: data.map(function (item, i) {\r\n          return angular.extend({}, colours[i], {\r\n            label: series[i],\r\n            data: item\r\n          });\r\n        })\r\n      };\r\n    }\r\n\r\n    function getData (labels, data, colours) {\r\n      return labels.map(function (label, i) {\r\n        return angular.extend({}, colours[i], {\r\n          label: label,\r\n          value: data[i],\r\n          color: colours[i].strokeColor,\r\n          highlight: colours[i].pointHighlightStroke\r\n        });\r\n      });\r\n    }\r\n\r\n    function setLegend (elem, chart) {\r\n      if (usingExcanvas) return;  // the code below has a bug in IE8\r\n\r\n      var $parent = elem.parent(),\r\n          $oldLegend = $parent.find('chart-legend'),\r\n          legend = '<chart-legend>' + chart.generateLegend() + '</chart-legend>';\r\n      if ($oldLegend.length) $oldLegend.replaceWith(legend);\r\n      else $parent.append(legend);\r\n    }\r\n\r\n    function updateChart (chart, values, scope) {\r\n      if (Array.isArray(scope.data[0])) {\r\n        chart.datasets.forEach(function (dataset, i) {\r\n          (dataset.points || dataset.bars).forEach(function (dataItem, j) {\r\n            dataItem.value = values[i][j];\r\n          });\r\n        });\r\n      } else {\r\n        chart.segments.forEach(function (segment, i) {\r\n          segment.value = values[i];\r\n        });\r\n      }\r\n      chart.update();\r\n      scope.$emit('update', chart);\r\n    }\r\n\r\n    function isEmpty (value) {\r\n      return ! value ||\r\n        (Array.isArray(value) && ! value.length) ||\r\n        (typeof value === 'object' && ! Object.keys(value).length);\r\n    }\r\n\r\n  }\r\n}));\r\n"],"sourceRoot":"/source/"}